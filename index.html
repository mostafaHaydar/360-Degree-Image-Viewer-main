<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/global.css" />
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Baskervville+SC&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/three.js/105/three.min.js"
      integrity="sha512-uWKImujbh9CwNa8Eey5s8vlHDB4o1HhrVszkympkm5ciYTnUEQv3t4QHU02CUqPtdKTg62FsHo12x63q6u0wmg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="./js/panolens.min.js"></script>
    <script src="./js/main.js"></script>
    <script src="./js/global.js"></script>
    <title>Document</title>
  </head>
  <body>
    <div class="search">
      <form action="">
        <input type="text" placeholder="search by Address" />
        <button>
          <img src="./images/graphics/search.svg" alt="search" />
        </button>
      </form>
    </div>
    <div id="container" style="width: 100%"></div>
    <script>
      async function fetchData() {
        try {
          const response = await fetch("./db/data.json");
          if (!response.ok) {
            throw new Error("Network response was not ok");
          }
          const data = await response.json();
          return data;
        } catch (error) {
          console.error("Error fetching and parsing data:", error);
        }
      }
      async function main() {
        const data = await fetchData();
        if (!data || !data.home || !data.home.rooms) {
          console.log("No data found");
          return;
        }
        document.getElementById("container").innerHTML += `
                    <div class="view-container">
                      <div class="make-call" onclick="ownerPhoneNumber(this)">
                        <img src="./images/graphics/phone.svg" alt="call phone" />
                        <p>${data.home.phone_number}</p>
                      </div>
                      <div class="viewer id-${data.home.id}"></div>
                      <img
                        src="./images/graphics/heart.svg"
                        alt="like"
                        onclick="addLike(this)"
                        class="like-icon"
                        data-liked="false"
                      />
                      <div class="property-inof-address">
                        <img src="./images/graphics/flag.svg" alt="location" />
                        <p>${data.home.address}</p>
                      </div>
                      <div class="property-inof-price">
                        <img src="./images/graphics/payments.svg" alt="price" />
                        <p>${data.home.price} per month</p>
                      </div>
                      <a href="./description.html?homeID=${data.home.id}&roomID=${data.home.rooms[0].id}" class="full-visit">
                        <img src="./images/graphics/360.svg" alt="visit" />
                        <p>make a full visit</p>
                      </a>
                    </div>
                  `;
        initializeViewer(data.home.image_url, `id-${data.home.id}`);
      }
      main();
    </script>

    <footer>
      <div class="linksForContact">
        <a href="#" target="_blank" class="contactIconContainer">
          <img src="./images/graphics/instagram.svg" alt="instagram" />
        </a>
        <a href="#" target="_blank" class="contactIconContainer">
          <img src="./images/graphics/email.svg" alt="email" />
        </a>
        <a href="#" target="_blank" class="contactIconContainer">
          <img src="./images/graphics/facebook.svg" alt="facebook" />
        </a>
      </div>
    </footer>
  </body>
</html>
